package com.github.CreatureOX.eemod.events;

import net.minecraft.client.Minecraft;
import net.minecraft.client.gui.GuiButton;
import net.minecraft.client.gui.GuiOptions;
import net.minecraft.client.gui.GuiScreen;
import net.minecraftforge.client.event.GuiScreenEvent.ActionPerformedEvent;
import net.minecraftforge.client.event.GuiScreenEvent.InitGuiEvent;

import org.lwjgl.input.Keyboard;

import com.github.CreatureOX.eemod.client.gui.EEmodGui;

import cpw.mods.fml.common.eventhandler.SubscribeEvent;
import cpw.mods.fml.common.gameevent.InputEvent.KeyInputEvent;

public class EEmodEvent {

	private GuiButton btnShowNewGui = new GuiButton(223, 0, 0, "EEmod Test");

	@SubscribeEvent
	public void guiScreenShow(InitGuiEvent.Post event)
	{
		if(event.gui instanceof GuiOptions)
		{
			GuiScreen screen = event.gui;
			for(Object o : event.buttonList)
			{
				GuiButton btn = (GuiButton)o;
				if(btn.id == 4) //退出游戏按钮的id
					btn.xPosition = (int)(screen.width * 0.75);
				if(btn.id == 0) //选项按钮的id
				{
					btn.yPosition = (int)(screen.height * 0.7);
					btn.xPosition = (int)(screen.width * 0.75);
				}
			}
			btnShowNewGui.xPosition = (int)(screen.width * 0.5) - 100;
			btnShowNewGui.yPosition = (int)(screen.height * 0.8);
			btnShowNewGui.width =  200;
			event.buttonList.add(btnShowNewGui);
		}
	}

	@SubscribeEvent
	public void guiClickButton(ActionPerformedEvent.Post event)
	{
		if(event.button == btnShowNewGui)
		{
			Minecraft mc = Minecraft.getMinecraft();
			mc.displayGuiScreen(new EEmodGui(mc.currentScreen));
		}
	}
	
	@SubscribeEvent
	public void keyListener(KeyInputEvent event) {
		if (Keyboard.getEventKey() == Keyboard.KEY_K) //获取按下的按键并判断
	        {
			Minecraft mc = Minecraft.getMinecraft();
			mc.displayGuiScreen(new EEmodGui(mc.currentScreen));
	        }
	}
}
