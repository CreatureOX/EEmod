package com.github.CreatureOX.eemod.item;

import com.github.CreatureOX.eemod.block.BasicBlock;

import net.minecraft.block.Block;
import net.minecraft.entity.EntityLivingBase;
import net.minecraft.entity.item.EntityBoat;
import net.minecraft.entity.item.EntityTNTPrimed;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.util.MathHelper;
import net.minecraft.world.World;
import net.minecraftforge.common.util.BlockSnapshot;
import net.minecraftforge.event.entity.player.PlayerInteractEvent;

public class ExperimentItem extends Item{
	@Override
	public boolean hitEntity(ItemStack par1ItemStack,EntityLivingBase par2EntityLivingBase,EntityLivingBase par3EntityLivingBase) {
	    par1ItemStack.damageItem(1, par3EntityLivingBase);
	    if (par3EntityLivingBase.worldObj.isRemote) {
	        return true;
	    }
	    float Angle = (par3EntityLivingBase.rotationYaw/ 180F) * 3.141593F;
	    float x = 3f * -MathHelper.sin(Angle);
	    float y = 1f;
	    float z = 3f * MathHelper.cos(Angle);
	    par2EntityLivingBase.setVelocity(x, y, z);
	    return true;
	}
	
	@Override
	public ItemStack onItemRightClick(ItemStack par1ItemStack, World par2World,EntityPlayer par3EntityPlayer) {
	    if (!par2World.isRemote) {
	        EntityBoat entity = new EntityBoat(par2World, par3EntityPlayer.posX,par3EntityPlayer.posY + par3EntityPlayer.getEyeHeight(), par3EntityPlayer.posZ);// getEyeHeight方法是获取物体头部到脚底的距离
	        float angle = (par3EntityPlayer.rotationYaw / 180F) * 3.141593F; // 水平方向的角度
	        float angle2 = (-par3EntityPlayer.rotationPitch / 180F) * 3.141593F; // 垂直方向的仰角
	        final float speed = 2f;
	        entity.motionY = speed * MathHelper.sin(angle2); // 算出三个方向上的速度,为了方便阅读我先计算的Y轴分速度
	        entity.motionX = speed * MathHelper.cos(angle2) * -MathHelper.sin(angle); // 根据仰角算出速度在XZ平面上的投影,再正交分解投影
	        entity.motionZ = speed * MathHelper.cos(angle2) * MathHelper.cos(angle);
	        par2World.spawnEntityInWorld(entity); // 放置实体
	    }
	    return par1ItemStack;
	}

}
