package com.github.CreatureOX.eemod.item;

import com.github.CreatureOX.eemod.Main;
import com.github.CreatureOX.eemod.block.BasicBlock;
import com.github.CreatureOX.eemod.client.gui.EEmodCursesGui;
import com.github.CreatureOX.eemod.client.gui.EEmodGui;
import com.github.CreatureOX.eemod.entity.EntityBesom;

import net.minecraft.block.Block;
import net.minecraft.block.material.Material;
import net.minecraft.client.Minecraft;
import net.minecraft.client.renderer.RenderGlobal;
import net.minecraft.entity.EntityLivingBase;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.init.Blocks;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraft.util.MathHelper;
import net.minecraft.util.MovingObjectPosition;
import net.minecraft.util.Vec3;
import net.minecraft.world.World;

public class Besom extends Item{
	@Override
	public ItemStack onItemRightClick(ItemStack par1ItemStack, World par2World,EntityPlayer par3EntityPlayer) {
        if (!par2World.isRemote){
            //par2World.spawnEntityInWorld(new EntityBesom(par2World, par3EntityPlayer));
        	EntityBesom entity = new EntityBesom(par2World, par3EntityPlayer.posX,par3EntityPlayer.posY + par3EntityPlayer.getEyeHeight(), par3EntityPlayer.posZ, par3EntityPlayer);// getEyeHeight方法是获取物体的"眼高",即头部到脚底的距离
            float angle = (par3EntityPlayer.rotationYaw / 180F) * 3.141593F; // 水平方向的角度
            float angle2 = (-par3EntityPlayer.rotationPitch / 180F) * 3.141593F; // 垂直方向的仰角
            final float speed = 2f; // TNT飞行速度 - 抱歉我卖了个萌
            entity.motionY = speed * MathHelper.sin(angle2); // 算出三个方向上的速度,为了方便阅读我先计算的Y轴分速度
            entity.motionX = speed * MathHelper.cos(angle2) * -MathHelper.sin(angle); // 根据仰角算出速度在XZ平面上的投影,再正交分解投影
            entity.motionZ = speed * MathHelper.cos(angle2) * MathHelper.cos(angle);
            par2World.spawnEntityInWorld(entity); // 放置实体咯
        }		
		return par1ItemStack;
	
	}			
}
